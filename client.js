!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("uuid"),require("url-parse"));else if("function"==typeof define&&define.amd)define(["uuid","url-parse"],e);else{var r="object"==typeof exports?e(require("uuid"),require("url-parse")):e(t.uuid,t["url-parse"]);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(t,e){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(){var t=void 0,e=void 0,r=new Promise(function(r,n){t=r,e=n});return r.resolve=t,r.reject=e,r}var o=r(1),i=r(2),s=r(3),u=r(4),c=t.exports=function t(e){var r=this;if(void 0===e)throw new TypeError("Client.constructor() expects to receive a transport");if(!(this instanceof t))return new t(e);if(void 0===e.on||"function"!=typeof e.on||void 0===e.emit||"function"!=typeof e.emit)throw new TypeError("Client.constructor() expects transport to implement the method .on() and .emit()");return this.id=o.v4(),this.transport=e,this.httpHandlers={},this.eventHandlers=[],this.transport.on(i.HTTP,function(t,e){var n=e.status>=200&&e.status<300?"resolve":"reject";r.httpHandlers[e.id].promise[n](e),delete r.httpHandlers[e.id]}),this.transport.on(i.EVENT,function(t,e){r.eventHandlers.forEach(function(t){t.url===e.url&&t.callback(e)})}),this.transport.emit(i.CONNECT,{id:this.id}),this};s.forEach(function(t){c.prototype[t]=function(e,r){var o=n(),s=new u(e);return s.method=t,["post","put"].includes(s.method)&&(s.body=r),this.httpHandlers[s.id]={req:s,promise:o},this.transport.emit(i.HTTP,s),o}}),c.prototype.on=function(t,e){this.eventHandlers.push({url:t,callback:e})}},function(e,r){e.exports=t},function(t,e){"use strict";t.exports={HTTP:"@@PERANTA_HTTP",EVENT:"@@PERANTA_EVENT",CONNECT:"@@PERANTA_CONNECT"}},function(t,e){"use strict";t.exports=["get","post","put","delete"]},function(t,e,r){"use strict";var n=r(1),o=r(5);t.exports=function(t){if("string"!=typeof t)throw new TypeError("Request.constructor() requires url to be a string");return this.id=n.v4(),this.method=null,this.url=t,this.body={},this.params={},Object.defineProperty(this,"originalUrl",{configurable:!1,enumerable:!0,value:t}),Object.defineProperty(this,"path",{configurable:!1,enumerable:!0,get:function(){try{return o(this.url).pathname}catch(t){return}}}),Object.defineProperty(this,"query",{configurable:!0,enumerable:!0,get:function(){try{return o(this.url,!0).query}catch(t){return{}}}}),this}},function(t,r){t.exports=e}])});