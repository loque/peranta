!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("uuid"),require("url-parse"));else if("function"==typeof define&&define.amd)define(["uuid","url-parse"],t);else{var r="object"==typeof exports?t(require("uuid"),require("url-parse")):t(e.uuid,e["url-parse"]);for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(this,function(e,t){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,__webpack_require__),i.loaded=!0,i.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,r){"use strict";function exposePromise(){var e=void 0,t=void 0,r=new Promise(function(r,i){e=r,t=i});return r.resolve=e,r.reject=t,r}var i=r(1),n=r(2),o=r(3),s=r(4),u=e.exports=function Client(e){var t=this;if(void 0===e)throw new TypeError("Client.constructor() expects to receive a transport");if(!(this instanceof Client))return new Client(e);if(void 0===e.on||"function"!=typeof e.on||void 0===e.emit||"function"!=typeof e.emit)throw new TypeError("Client.constructor() expects transport to implement the method .on() and .emit()");return this.id=i.v4(),this.transport=e,this.httpHandlers={},this.eventHandlers=[],this.transport.on(n.HTTP,function(e,r){var i=r.status>=200&&r.status<300?"resolve":"reject";t.httpHandlers[r.id].promise[i](r),delete t.httpHandlers[r.id]}),this.transport.on(n.EVENT,function(e,r){t.eventHandlers.forEach(function(e){e.url===r.url&&e.callback(r)})}),this.transport.emit(n.CONNECT,{id:this.id}),this};o.forEach(function(e){u.prototype[e]=function(t,r){var i=exposePromise(),o=new s(t);return o.method=e,["post","put"].includes(o.method)&&(o.body=r),this.httpHandlers[o.id]={req:o,promise:i},this.transport.emit(n.HTTP,o),i}}),u.prototype.on=function(e,t){this.eventHandlers.push({url:e,callback:t})}},function(t,r){t.exports=e},function(e,t){"use strict";e.exports={HTTP:"@@PERANTA_HTTP",EVENT:"@@PERANTA_EVENT",CONNECT:"@@PERANTA_CONNECT"}},function(e,t){"use strict";e.exports=["get","post","put","delete"]},function(e,t,r){"use strict";var i=r(1),n=r(5);e.exports=function(e){if("string"!=typeof e)throw new TypeError("Request.constructor() requires url to be a string");return this.id=i.v4(),this.method=null,this.url=e,this.body={},this.params={},Object.defineProperty(this,"originalUrl",{configurable:!1,enumerable:!0,value:e}),Object.defineProperty(this,"path",{configurable:!1,enumerable:!0,get:function(){try{return n(this.url).pathname}catch(e){return}}}),Object.defineProperty(this,"query",{configurable:!0,enumerable:!0,get:function(){try{return n(this.url,!0).query}catch(e){return{}}}}),this}},function(e,r){e.exports=t}])});