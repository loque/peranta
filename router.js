!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("array-flatten"),require("path-to-regexp"));else if("function"==typeof define&&define.amd)define(["array-flatten","path-to-regexp"],t);else{var r="object"==typeof exports?t(require("array-flatten"),require("path-to-regexp")):t(e["array-flatten"],e["path-to-regexp"]);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(e,t){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,r){"use strict";function checkForwardSlashes(e){return"/"!==e&&(e.endsWith("/")&&(e=e.slice(0,-1)),e.startsWith("/")||(e="/"+e)),e}var n=r(6),o=r(3),i=r(7),s=e.exports=function Router(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";if("string"!=typeof e)throw new TypeError("Router.constructor() requires prefix to be a string");return this instanceof Router?(this.prefix=checkForwardSlashes(e),this.routes=[],this.routeIdx,this.end=function(){},this):new Router(e)};o.concat("all").forEach(function(e){s.prototype[e]=function(t){for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(o=n(o),"string"!=typeof t)throw new TypeError("Router."+e+"() requires a path as the first parameter");if(!o.length)throw new TypeError("Router."+e+"() requires at least one function");if(!o.every(function(e){return"function"==typeof e}))throw new TypeError("Router."+e+'() requires middlewares to be of type "function"');t=checkForwardSlashes(t);var a=new i(this,e,t);return a.setHandlers(o),this.routes.push(a),this}}),s.prototype.use=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t=n(t);var o="string"==typeof t[0]?checkForwardSlashes(t.shift()):"/";if(!t.length)throw new TypeError("Router.use() requires middleware functions");if(!t.every(function(e){return"function"==typeof e}))throw new TypeError('Router.use() requires middlewares to be of type "function"');var s=new i(this,"use",o,{end:!1});s.setHandlers(t),this.routes.push(s)},s.prototype.handle=function(e,t,r){function next(){if(n.routeIdx>=n.routes.length)return n.end(e,t);var r=n.routes[n.routeIdx],o=r.match(e.method,e.path);return n.routeIdx++,o?void r.handle(e,t,next):next()}var n=this;this.routeIdx=0,next()},s.prototype.setPrefix=function(e){this.prefix=checkForwardSlashes(e)},s.prototype.debug=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={prefix:this.prefix,routes:this.routes.map(function(e){return e.debug()})};return e?JSON.stringify(t):t},s.prototype.middleware=function(){function routerAsMiddleware(t,r,n){return e(t,r,n)}var e=this.handle.bind(this);return routerAsMiddleware.debug=this.debug.bind(this),routerAsMiddleware.setPrefix=this.setPrefix.bind(this),routerAsMiddleware}},,,function(e,t){"use strict";e.exports=["get","post","put","delete"]},,,function(t,r){t.exports=e},function(e,t,r){"use strict";function createPathMatcher(e,t){return t=t||{},function(r,o){var i=e(),s=[];o=o||{};var a=n(i,s,t),u=a.exec(r);if(null===u)return!1;var h=u.shift();return s.forEach(function(e,t){o[e.name]=u[t]}),{match:h,params:o}}}function prefixPath(e,t){return"/"===e?t:(t.endsWith("/")&&(t=t.slice(0,-1)),""+t+e)}var n=r(8),o=r(3),i=r(9),s=e.exports=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("Router"!==e.constructor.name)throw new TypeError("Route.constructor() expects router to be an instance of Router");if(!o.concat(["all","use"]).includes(t))throw new TypeError("Route.constructor() method argument is invalid");if("string"!=typeof r)throw new TypeError("Route.constructor() requires path to be a string");return this.router=e,this.method=t,this.path=r,this.params={},this.matchingUrl,this.pathMatcher=createPathMatcher(this.getPath.bind(this),n),this.handlers=[],this.handlerIdx,this};s.prototype.getPath=function(){return prefixPath(this.path,this.router.prefix)},s.prototype.setHandlers=function(e){var t=this;this.handlers=e.map(function(r,n){var o=n===e.length-1&&r.length<3?"callback":"middleware";if(r.hasOwnProperty("setPrefix")){if("use"!==t.method)throw new Error("Router.setHandlers() can only accept a router-as-middleware only when created by .use()");r.getRoutePrefix=t.getPath.bind(t)}return new i(o,r)})},s.prototype.match=function(e,t){if(this.method!==e&&"all"!==this.method&&"use"!==this.method)return!1;var r=this.pathMatcher(t);return r!==!1&&(this.matchingUrl=r.match,this.params=r.params,!0)},s.prototype.handle=function(e,t,r){function next(o){if("route"===o)return r();if(n.handlerIdx>=n.handlers.length)return r();var i=n.handlers[n.handlerIdx];n.handlerIdx++,t.next=next,i.run(e,t,next)}e.params=this.params,this.handlerIdx=0;var n=this;next()},s.prototype.debug=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={path:this.getPath(),method:this.method,handlers:this.handlers.map(function(e){return e.debug()})};return e?JSON.stringify(t):t}},function(e,r){e.exports=t},function(e,t){"use strict";var r=e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Handler.constructor() requires type to be a string");if("function"!=typeof t)throw new TypeError("Handler.constructor() requires handler to be of type function");return this.type="routerAsMiddleware"===t.name?"router":e,this.handler=t,this};r.prototype.debug=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setPrefix();var t=void 0;return t="router"===this.type?this.handler.debug():{type:this.type,name:this.handler.name||"<anonymous>",arguments:this.handler.length},e?JSON.stringify(t):t},r.prototype.run=function(e,t,r){this.setPrefix(),this.handler(e,t,r)},r.prototype.setPrefix=function(){"router"===this.type&&this.handler.hasOwnProperty("setPrefix")&&this.handler.hasOwnProperty("getRoutePrefix")&&this.handler.setPrefix(this.handler.getRoutePrefix())}}])});